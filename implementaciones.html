<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Implementaciones - PokÃ©Finder</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
  <a href="index.html" class="boton-home">ğŸ  Inicio</a>
  <a href="ayuda.html" class="boton-volver">ğŸ”™ Volver a Ayuda</a>
  <button onclick="descargarPDF()" class="boton-descarga">ğŸ“„ Descargar PDF</button>
  <a href="anexo2.html" class="boton-anexo">ğŸ“˜ Ver Anexo TÃ©cnico</a>

  <header>
    <h1>ğŸ› ï¸ ExposiciÃ³n TÃ©cnica: PokÃ©Finder PRO</h1>
  </header>

  <main id="contenido-implementaciones" class="implementaciones">
    <section>
      <h2>ğŸ“Œ Objetivo del Proyecto</h2>
      <p>PokÃ©Finder PRO es una aplicaciÃ³n web interactiva diseÃ±ada para explorar
        informaciÃ³n detallada sobre PokÃ©mon, basada en la <strong>PokÃ©API</strong>. Permite bÃºsquedas avanzadas,
        visualizaciÃ³n de estadÃ­sticas, comparaciÃ³n, animaciones, sÃ­ntesis de voz y cambio de tema visual.
      </p>
    </section>

    <section>
      <h2>ğŸ§± TecnologÃ­as Utilizadas</h2>
      <ul>
        <li><strong>HTML5:</strong> Estructura semÃ¡ntica y accesible.</li>
        <li><strong>CSS3:</strong> Estilos responsivos, temas claro/oscuro, efectos interactivos.</li>
        <li><strong>JavaScript (ES6):</strong> Fetch API, async/await, DOM, eventos, condiciones dinÃ¡micas.</li>
        <li><strong>PokÃ©API:</strong> API RESTful gratuita con +1000 PokÃ©mon.</li>
        <li><strong>SpeechSynthesis API:</strong> Lectura por voz en navegador.</li>
      </ul>
    </section>

    <section>
      <h2>ğŸ” Funcionalidades Implementadas</h2>
      <p><strong>Selecciona una funcionalidad para ver su explicaciÃ³n detallada:</strong></p>
      <div class="selector-funcionalidad">
        <label><input type="radio" name="funcSeleccionada" value="f1" checked /> 1. Carga dinÃ¡mica de nombres</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f2" /> 2. Autocompletado inteligente</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f3" /> 3. Ficha tÃ©cnica de un PokÃ©mon</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f4" /> 4. GalerÃ­a por tipo</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f5" /> 5. Filtro dentro de la galerÃ­a</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f6" /> 6. ComparaciÃ³n entre PokÃ©mon</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f7" /> 7. SÃ­ntesis de voz</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f8" /> 8. Sprite animado</label><br>
        <label><input type="radio" name="funcSeleccionada" value="f9" /> 9. Tema claro / oscuro</label><br>
      </div>
      <button class="boton-explicacion" onclick="mostrarExplicacionSeleccionada()">ğŸ§  Ver explicaciÃ³n detallada</button>
    </section>

    <section>
      <h2>ğŸ“ OrganizaciÃ³n del CÃ³digo</h2>
      <ul>
        <li><strong>index.html:</strong> estructura del sitio, inputs, botones, secciones.</li>
        <li><strong>style.css:</strong> diseÃ±o visual del tema, botones, lista, tabla.</li>
        <li><strong>script.js:</strong> funciones para cargar API, manejar eventos y renderizar datos dinÃ¡micamente.</li>
      </ul>
    </section>

    <section>
      <h2>ğŸ“ˆ Escalabilidad y mejoras futuras</h2>
      <ul>
        <li>Filtro por generaciÃ³n o regiÃ³n</li>
        <li>Mostrar habilidades ocultas</li>
        <li>Modo historia por evoluciÃ³n</li>
        <li>Historial de bÃºsqueda</li>
      </ul>
    </section>

    <section>
      <h2>ğŸ“ ConclusiÃ³n</h2>
      <p>
        Este proyecto demuestra el potencial de una app frontend modular y autÃ³noma, desarrollada con tecnologÃ­as nativas del navegador. Es escalable y adecuada como proyecto acadÃ©mico evaluativo.
      </p>
    </section>
  </main>

  <div id="modalExplicacion" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" onclick="cerrarModal()">&times;</span>
      <h3 id="modalTitulo">ExplicaciÃ³n tÃ©cnica</h3>
      <div id="explicacionContenido"></div>
    </div>
  </div>

  <script>
    const explicaciones = {
      f1: [
        ["const res = await fetch('https://pokeapi.co/api/v2/pokemon?limit=10000');", "â†’ Se obtiene la lista completa de PokÃ©mon desde la API."],
        ["const data = await res.json();", "â†’ Se transforma la respuesta a formato JSON."],
        ["allPokemonNames = data.results.map((p) => p.name);", "â†’ Se extraen y guardan solo los nombres."],
        ["allPokemonNames.forEach((name) => { ... });", "â†’ Se recorren y muestran los nombres en una lista en la pÃ¡gina."]
      ],
      f2: [
        ["input.addEventListener('input', () => { ... });", "â†’ Detecta cuando el usuario escribe."],
        ["const matches = allPokemonNames.filter(...).slice(0, 10);", "â†’ Filtra los primeros 10 PokÃ©mon que coincidan con lo escrito."],
        ["div.onclick = () => { ... };", "â†’ Al hacer clic en una sugerencia, se autocompleta el campo."]
      ],
      f3: [
        ["const res = await fetch(...);", "â†’ Consulta los datos del PokÃ©mon por nombre o ID."],
        ["const habilidades = data.abilities.map(...);", "â†’ Extrae los nombres de las habilidades."],
        ["const stats = data.stats.map(...);", "â†’ Muestra las estadÃ­sticas en formato visual."]
      ],
      f4: [
        ["const res = await fetch(`https://pokeapi.co/api/v2/type/${tipo}`);", "â†’ Obtiene los PokÃ©mon del tipo seleccionado."],
        ["for (let item of lista) { ... }", "â†’ Se muestran los sprites y nombres de los primeros 40 PokÃ©mon del tipo."]
      ],
      f5: [
        ["const filtro = document.getElementById(...).value.toLowerCase();", "â†’ Toma el texto ingresado para filtrar."],
        ["card.style.display = nombre.includes(filtro) ? 'block' : 'none';", "â†’ Oculta o muestra cartas segÃºn el filtro."]
      ],
      f6: [
        ["const [res1, res2] = await Promise.all([...]);", "â†’ Consulta los datos de dos PokÃ©mon al tiempo."],
        ["mostrarTablaComparacion(data1, data2);", "â†’ Compara visualmente atributos clave."]
      ],
      f7: [
        ["const msg = new SpeechSynthesisUtterance(nombre);", "â†’ Crea el objeto para sÃ­ntesis de voz."],
        ["speechSynthesis.speak(msg);", "â†’ Reproduce el nombre con voz."]
      ],
      f8: [
        ["const animatedSprite = data.sprites.versions[...];", "â†’ Verifica si existe un sprite animado."],
        ["botonAnimacion.onclick = () => { ... }", "â†’ Cambia el sprite estÃ¡tico por el animado."]
      ],
      f9: [
        ["body.classList.toggle('dark');", "â†’ Cambia entre modo oscuro y claro."],
        ["body.classList.toggle('light');", "â†’ Alterna las clases de tema."]
      ]
    };

    function mostrarExplicacionSeleccionada() {
      const seleccionada = document.querySelector('input[name="funcSeleccionada"]:checked').value;
      const modal = document.getElementById("modalExplicacion");
      const contenido = document.getElementById("explicacionContenido");
      const titulo = document.getElementById("modalTitulo");
      const explicacion = explicaciones[seleccionada];

      titulo.textContent = "Funcionalidad " + seleccionada.slice(-1);
      contenido.innerHTML = explicacion.map(([codigo, texto]) =>
        `<div class="linea-codigo"><code>${codigo}</code><span>${texto}</span></div>`
      ).join("");

      modal.style.display = "block";
    }

    function cerrarModal() {
      document.getElementById("modalExplicacion").style.display = "none";
    }

    function descargarPDF() {
      const contenedor = document.getElementById("contenido-implementaciones");

      const bloqueExtra = document.createElement("section");
      bloqueExtra.id = "explicaciones-en-pdf";
      bloqueExtra.innerHTML = `<h2>ğŸ“„ Anexo: Explicaciones lÃ­nea por lÃ­nea</h2>` +
        Object.keys(explicaciones).map((key) => {
          const titulo = `<h3>Funcionalidad ${key.slice(-1)}</h3>`;
          const contenido = explicaciones[key].map(
            ([codigo, texto]) => `<div class="linea-codigo"><code>${codigo}</code><span>${texto}</span></div>`
          ).join("");
          return titulo + contenido;
        }).join("");

      contenedor.appendChild(bloqueExtra);

      const opciones = {
        margin: 0.5,
        filename: 'implementaciones_pokefinder.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };

      html2pdf().set(opciones).from(contenedor).save().then(() => {
        bloqueExtra.remove();
      });
    }
  </script>
</body>
</html>
